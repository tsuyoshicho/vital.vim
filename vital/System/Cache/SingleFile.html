<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Vim documentation: vital/System/Cache/SingleFile</title>
<meta name="Generator" content="Vim/8.2">
<meta name="plugin-version" content="vim8.1_v2">
<meta name="syntax" content="help">
<meta name="settings" content="no_progress,ignore_folding,use_css,no_foldcolumn,expand_tabs,ignore_conceal,prevent_copy=,use_input_for_pc=fallback">
<meta name="colorscheme" content="github">
<style>
<!--
.MissingTag { background-color: black; color: white; }
.EnglishTag { background-color: gray; color: white; }
pre { font-family: monospace; color: #24292e; background-color: #ffffff; }
body { font-family: monospace; color: #24292e; background-color: #ffffff; }
* { font-size: 1em; }
.PreProc { color: #d73a49; }
.Todo { color: #6f42c1; text-decoration: underline; }
.helpExample { font-weight: bold; }
.Special { color: #6f42c1; }
.Ignore { color: #babbbc; background-color: #ffffff; padding-bottom: 1px; }
.Statement { color: #d73a49; }
-->
</style>
</head>
<body>

<a name="top"></a><h1>Vim documentation: vital/System/Cache/SingleFile</h1>
<a href="./../../../index.html">main help file</a>
<hr>
<pre id='vimCodeElement'>
<a class="String" href="./../../../vital/System/Cache/SingleFile.html" name="vital/System/Cache/SingleFile.txt">vital/System/Cache/SingleFile.txt</a>     A single file based cache system

Maintainer: Alisue &lt;lambdalisue@hashnote.net&gt;


<span class="PreProc">==============================================================================</span>
<span class="Statement">CONTENTS</span>                        <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-contents" name="Vital.System.Cache.SingleFile-contents">Vital.System.Cache.SingleFile-contents</a>

Introductions           <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-intro">Vital.System.Cache.SingleFile-intro</a>
Usage                   <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-usage">Vital.System.Cache.SingleFile-usage</a>
Functions               <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-functions">Vital.System.Cache.SingleFile-functions</a>
Methods                 <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-methods">Vital.System.Cache.SingleFile-methods</a>
Properties              <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-properties">Vital.System.Cache.SingleFile-properties</a>


<span class="PreProc">==============================================================================</span>
<span class="Statement">INTRODUCTIONS</span>                           <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-intro" name="Vital.System.Cache.SingleFile-intro">Vital.System.Cache.SingleFile-intro</a>

<a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile" name="Vital.System.Cache.SingleFile">Vital.System.Cache.SingleFile</a> is a single file based cache system.
It stores a cache dictionary into a single cache file, mean that it is similar
to <a class="Identifier" href="./../../../vital/System/Cache/Memory.html#Vital.System.Cache.Memory">Vital.System.Cache.Memory</a> but the cache is persistent.
If you prefer to store key and value into individual files, use
<a class="Identifier" href="./../../../vital/System/Cache/File.html#Vital.System.Cache.File">Vital.System.Cache.File</a> instead.


<span class="PreProc">==============================================================================</span>
<span class="Statement">USAGE</span>                                   <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-usage" name="Vital.System.Cache.SingleFile-usage">Vital.System.Cache.SingleFile-usage</a>

<a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile">Vital.System.Cache.SingleFile</a> have all required API of unified cache system and
values are stored in a <a href="https://www.google.com/search?q=vim+%22Dictionary%22&lr=lang_en"><span class="MissingTag">Dictionary</span></a> instance.
In the following example, <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile">Vital.System.Cache.SingleFile</a> is used for memorize
the calculated values.

<span class="helpExample">        let s:V = vital#{plugin-name}#new()</span>
<span class="helpExample">        let s:C = s:V.import('System.Cache.SingleFile')</span>

<span class="helpExample">        let s:factorial_cache = s:C.new({'cache_file': '.cache'})</span>

<span class="helpExample">        function! s:factorial(n)</span>
<span class="helpExample">          if a:n == 0</span>
<span class="helpExample">            return 1</span>
<span class="helpExample">          elseif s:factorial_cache.has(a:n)</span>
<span class="helpExample">            return s:factorial_cache.get(a:n)</span>
<span class="helpExample">          else</span>
<span class="helpExample">            let x = s:factorial(a:n - 1) * a:n</span>
<span class="helpExample">            call s:factorial_cache.set(a:n, x)</span>
<span class="helpExample">            return x</span>
<span class="helpExample">          endif</span>
<span class="helpExample">        endfunction</span>

<span class="helpExample">        echo s:factorial(10)</span>


<span class="PreProc">==============================================================================</span>
<span class="Statement">FUNCTIONS</span>                               <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-functions" name="Vital.System.Cache.SingleFile-functions">Vital.System.Cache.SingleFile-functions</a>

new([<span class="Special">{options}</span>])                        <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile.new()" name="Vital.System.Cache.SingleFile.new()">Vital.System.Cache.SingleFile.new()</a>

        Create a new instance of System.Cache.SingleFile.
        It requires 'cache_file' option in <span class="Special">{options}</span>. If no 'cache_file' is
        specified, it will throw an exception.
        The parent directory of 'cache_file' will automatically be created if
        missing.
        Users can use a <a href="https://www.google.com/search?q=vim+%22'autodump'%22&lr=lang_en"><span class="MissingTag">'autodump'</span></a> option in <span class="Special">{options}</span> to set the initial value
        of <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.autodump">Vital.System.Cache.SingleFile-instance.autodump</a>.


<span class="PreProc">==============================================================================</span>
<span class="Statement">METHODS</span>                                 <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-methods" name="Vital.System.Cache.SingleFile-methods">Vital.System.Cache.SingleFile-methods</a>

dump()                  <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.dump()" name="Vital.System.Cache.SingleFile-instance.dump()">Vital.System.Cache.SingleFile-instance.dump()</a>

        Dump a cache content into the 'cache_file'.
        It will be automatically called when the cache content is changed if
        <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.autodump">Vital.System.Cache.SingleFile-instance.autodump</a> is 1. Otherwise users
        need to call this method to dump the cache content into a cache file.

load()                  <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.load()" name="Vital.System.Cache.SingleFile-instance.load()">Vital.System.Cache.SingleFile-instance.load()</a>

        Load a cache content from the 'cache_file'.
        It will be automatically called when the cache instance is created (in
        <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile.new()">Vital.System.Cache.SingleFile.new()</a>.
        Users can call this method to load the cache content manually.
        <span class="Todo">Note</span> that this method call may trigger to call
        <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.on_changed()">Vital.System.Cache.SingleFile-instance.on_changed()</a> hook.

cache_key(<span class="Special">{obj}</span>)        <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.cache_key()" name="Vital.System.Cache.SingleFile-instance.cache_key()">Vital.System.Cache.SingleFile-instance.cache_key()</a>

        See <a href="https://www.google.com/search?q=vim+%22Vital.System.Cache.Base.cache_key()%22&lr=lang_en"><span class="MissingTag">Vital.System.Cache.Base.cache_key()</span></a>

has(<span class="Special">{name}</span>)             <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.has()" name="Vital.System.Cache.SingleFile-instance.has()">Vital.System.Cache.SingleFile-instance.has()</a>

        Return 1 if the cache instance has <span class="Special">{name}</span> in its cache dictionary.
        Otherwise 0.

        <span class="Special">{name}</span> (required)
        A name of the cache. An actual cache key will be created via
        <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.cache_key()">Vital.System.Cache.SingleFile-instance.cache_key()</a> method thus <span class="Special">{name}</span>
        is not required to be <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a>.

<span class="Statement">                       </span> <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.get()" name="Vital.System.Cache.SingleFile-instance.get()">Vital.System.Cache.SingleFile-instance.get()</a>
get(<span class="Special">{name}</span>[, <span class="Special">{default}</span>])

        Return a cached value of <span class="Special">{name}</span> in a cache dictionary. It returns
        <span class="Special">{default}</span> if no value is found.

        <span class="Special">{name}</span> (required)
        A name of the cache. An actual cache key will be created via
        <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.cache_key()">Vital.System.Cache.SingleFile-instance.cache_key()</a> method thus <span class="Special">{name}</span>
        is not required to be <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a>.

        <span class="Special">{default}</span> (optional)
        A default value. It will be returned when no value is found in the
        cache dictionary.

set(<span class="Special">{name}</span>, <span class="Special">{value}</span>)    <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.set()" name="Vital.System.Cache.SingleFile-instance.set()">Vital.System.Cache.SingleFile-instance.set()</a>

        Save <span class="Special">{value}</span> into a cache dictionary as <span class="Special">{name}</span> and dump the cache
        dictionary into 'cache_file'.

        <span class="Special">{name}</span> (required)
        A name of the cache. An actual cache key will be created via
        <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.cache_key()">Vital.System.Cache.SingleFile-instance.cache_key()</a> method thus <span class="Special">{name}</span>
        is not required to be <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a>.

        <span class="Special">{value}</span> (required)
        A value of the cache.

keys()                  <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.keys()" name="Vital.System.Cache.SingleFile-instance.keys()">Vital.System.Cache.SingleFile-instance.keys()</a>

        Return a list of cache keys

remove(<span class="Special">{name}</span>)          <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.remove()" name="Vital.System.Cache.SingleFile-instance.remove()">Vital.System.Cache.SingleFile-instance.remove()</a>

        Remove <span class="Special">{name}</span> from a cache dictionary and dump the cache dictionary
        into 'cache_file'. It does nothing when the specified <span class="Special">{name}</span> is not
        found in the cache.

        <span class="Special">{name}</span> (required)
        A name of the cache. An actual cache key will be created via
        <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.cache_key()">Vital.System.Cache.SingleFile-instance.cache_key()</a> method thus <span class="Special">{name}</span>
        is not required to be <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a>.

clear()                 <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.clear()" name="Vital.System.Cache.SingleFile-instance.clear()">Vital.System.Cache.SingleFile-instance.clear()</a>

        Clear a cache dictionary and dump the cache dictionary into
        'cache_file'.

on_changed()            <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.on_changed()" name="Vital.System.Cache.SingleFile-instance.on_changed()">Vital.System.Cache.SingleFile-instance.on_changed()</a>

        A user defined hook method. This method is called when the content of
        the cache is changed, namely after the following methods:
        - <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.set()">Vital.System.Cache.SingleFile-instance.set()</a>
        - <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.remove()">Vital.System.Cache.SingleFile-instance.remove()</a>
        - <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.clear()">Vital.System.Cache.SingleFile-instance.clear()</a>
        - <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.load()">Vital.System.Cache.SingleFile-instance.load()</a>


<span class="PreProc">==============================================================================</span>
<span class="Statement">PROPERTIES</span>                      <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-properties" name="Vital.System.Cache.SingleFile-properties">Vital.System.Cache.SingleFile-properties</a>

cache_file              <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.cache_file" name="Vital.System.Cache.SingleFile-instance.cache_file">Vital.System.Cache.SingleFile-instance.cache_file</a>

        A file path where the cache content is saved.
        The directory of this file need to be exists if users re-define this
        property after the <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile.new()">Vital.System.Cache.SingleFile.new()</a> function call.

autodump                <a class="String" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.autodump" name="Vital.System.Cache.SingleFile-instance.autodump">Vital.System.Cache.SingleFile-instance.autodump</a>

        A boolean to enable/disable autodump feature.
        If the value is 1, <a class="Identifier" href="./../../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile-instance.dump()">Vital.System.Cache.SingleFile-instance.dump()</a>
        will be automatically called when the cache content is changed.
        Otherwise users need to call the method manually to dump the cache
        content into a cache file.


vim&#0058;tw=78:fo=tcq2mM:ts=8:ft=help:norl
</pre>
<hr>
<a href="#top">top</a> - <a href="./../../../index.html">main help file</a> - <a href="./../../../tags.html">tag index</a> <br>

</body>
</html>
<!-- vim: set foldmethod=manual : -->
