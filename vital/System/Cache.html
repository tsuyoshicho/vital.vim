<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Vim documentation: vital/System/Cache</title>
<meta name="Generator" content="Vim/8.2">
<meta name="plugin-version" content="vim8.1_v2">
<meta name="syntax" content="help">
<meta name="settings" content="no_progress,ignore_folding,use_css,no_foldcolumn,expand_tabs,ignore_conceal,prevent_copy=,use_input_for_pc=fallback">
<meta name="colorscheme" content="github">
<style>
<!--
.MissingTag { background-color: black; color: white; }
.EnglishTag { background-color: gray; color: white; }
pre { font-family: monospace; color: #24292e; background-color: #ffffff; }
body { font-family: monospace; color: #24292e; background-color: #ffffff; }
* { font-size: 1em; }
.PreProc { color: #d73a49; }
.Todo { color: #6f42c1; text-decoration: underline; }
.helpExample { font-weight: bold; }
.Special { color: #6f42c1; }
.Ignore { color: #babbbc; background-color: #ffffff; padding-bottom: 1px; }
.Statement { color: #d73a49; }
-->
</style>
</head>
<body>

<a name="top"></a><h1>Vim documentation: vital/System/Cache</h1>
<a href="./../../index.html">main help file</a>
<hr>
<pre id='vimCodeElement'>
<a class="String" href="./../../vital/System/Cache.html" name="vital/System/Cache.txt">vital/System/Cache.txt</a>        A unified cache system

Maintainer: Alisue &lt;lambdalisue@hashnote.net&gt;


<span class="PreProc">==============================================================================</span>
<span class="Statement">CONTENTS</span>                        <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-contents" name="Vital.System.Cache-contents">Vital.System.Cache-contents</a>

Introductions           <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache-intro">Vital.System.Cache-intro</a>
Usage                   <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache-usage">Vital.System.Cache-usage</a>
Interface               <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache-interface">Vital.System.Cache-interface</a>
  Functions             <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache-functions">Vital.System.Cache-functions</a>
  Methods               <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache-methods">Vital.System.Cache-methods</a>


<span class="PreProc">==============================================================================</span>
<span class="Statement">INTRODUCTIONS</span>                           <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-intro" name="Vital.System.Cache-intro">Vital.System.Cache-intro</a>

<a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache" name="Vital.System.Cache">Vital.System.Cache</a> is a unified cache system. All variants (backends) share
the application interface so users can easily switch to a different cache
variant. Currently the following variants are available.

- <a class="Identifier" href="./../../vital/System/Cache/Dummy.html#Vital.System.Cache.Dummy">Vital.System.Cache.Dummy</a>      : A dummy cache system which cache nothing
- <a class="Identifier" href="./../../vital/System/Cache/Memory.html#Vital.System.Cache.Memory">Vital.System.Cache.Memory</a>     : A dictionary instance based cache system
- <a class="Identifier" href="./../../vital/System/Cache/File.html#Vital.System.Cache.File">Vital.System.Cache.File</a>       : A file based cache system
- <a class="Identifier" href="./../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile">Vital.System.Cache.SingleFile</a> : A single file based cache system

<span class="Todo">Note</span> <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache">Vital.System.Cache</a> is replaced with a new unified cache system. An old
version have been moved into <a class="Identifier" href="./../../vital/System/Cache/Deprecated.html#Vital.System.Cache.Deprecated">Vital.System.Cache.Deprecated</a>.


<span class="PreProc">==============================================================================</span>
<span class="Statement">USAGE</span>                                   <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-usage" name="Vital.System.Cache-usage">Vital.System.Cache-usage</a>

First of all, create a new cache instance via <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache.new()">Vital.System.Cache.new()</a>
function. The following assume that you want to use a file based cache system.

<span class="helpExample">        let s:Cache = s:V.import('System.Cache')</span>
<span class="helpExample">        let s:cache = s:Cache.new('file', { 'cache_dir': '~/.cache/foo' })</span>

The <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache.new()">Vital.System.Cache.new()</a> function take one or two arguments. The first
argument is a name of a variant and currently the followings are available:

- &quot;dummy&quot;      : For <a class="Identifier" href="./../../vital/System/Cache/Dummy.html#Vital.System.Cache.Dummy">Vital.System.Cache.Dummy</a>
- &quot;memory&quot;     : For <a class="Identifier" href="./../../vital/System/Cache/Memory.html#Vital.System.Cache.Memory">Vital.System.Cache.Memory</a>
- &quot;file&quot;       : For <a class="Identifier" href="./../../vital/System/Cache/File.html#Vital.System.Cache.File">Vital.System.Cache.File</a>
- &quot;singlefile&quot; : For <a class="Identifier" href="./../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile">Vital.System.Cache.SingleFile</a>

The second argument is a variant specified option dictionary. For example,
<a class="Identifier" href="./../../vital/System/Cache/File.html#Vital.System.Cache.File">Vital.System.Cache.File</a> require 'cache_dir' option so the example code above
specify 'cache_dir' option in the second argument. See a document of each
variant for available options.

<span class="Todo">Note</span> that variants listed above will automatically vitalized when you vitalize
<a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache">Vital.System.Cache</a> to enable switching variants.
If you just want to use a particular variant and want to reduce the size of
your vital directory, you can directly import the variant without using
<a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache">Vital.System.Cache</a> module like:

<span class="helpExample">        &quot; You don't need a first argument for new() while you are directly</span>
<span class="helpExample">        &quot; importing a particular variant</span>
<span class="helpExample">        let s:Cache = s:V.import('System.Cache.File')</span>
<span class="helpExample">        let s:cache = s:Cache.new({ 'cache_dir': '~/.cache/foo' })</span>

After you get an instance of cache system, you can manipulate your cache with
the following interface:

- has(<span class="Special">{name}</span>)                   Check if a <span class="Special">{name}</span> cache exists
- get(<span class="Special">{name}</span>[, <span class="Special">{default}</span>])      Get a value from a <span class="Special">{name}</span> cache
- set(<span class="Special">{name}</span>, <span class="Special">{value}</span>)          Set a value to a <span class="Special">{name}</span> cache
- keys()                        Get a list of available cache names
- remove(<span class="Special">{name}</span>)                Remove a <span class="Special">{name}</span> cache
- clear()                       Remove all caches

The following example code simply calculate a factorial number by using a
cache system.

<span class="helpExample">        function! s:factorial(n)</span>
<span class="helpExample">          if a:n == 0</span>
<span class="helpExample">            return 1</span>
<span class="helpExample">          elseif s:cache.has(a:n)</span>
<span class="helpExample">            return s:cache.get(a:n)</span>
<span class="helpExample">          else</span>
<span class="helpExample">            let x = s:factorial(a:n - 1) * a:n</span>
<span class="helpExample">            call s:cache.set(a:n, x)</span>
<span class="helpExample">            return x</span>
<span class="helpExample">          endif</span>
<span class="helpExample">        endfunction</span>

<span class="helpExample">        echo s:factorial(10)</span>

If you want to create your own variants, follow an instruction written in
<a class="Identifier" href="./../../vital/System/Cache/Base.html#Vital.System.Cache.Base">Vital.System.Cache.Base</a>.


<span class="PreProc">==============================================================================</span>
<span class="Statement">INTERFACE</span>                               <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-interface" name="Vital.System.Cache-interface">Vital.System.Cache-interface</a>

See a document of each variant for detail. The following explain general
meaning of each API.

<span class="PreProc">-------------------------------------------------------------------------------</span>
<span class="Statement">FUNCTIONS</span>                               <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-functions" name="Vital.System.Cache-functions">Vital.System.Cache-functions</a>

new(<span class="Special">{name}</span>[, <span class="Special">{options}</span>])                <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache.new()" name="Vital.System.Cache.new()">Vital.System.Cache.new()</a>

        Create a new instance of System.Cache. The following variant <span class="Special">{name}</span>s
        are currently available:

        &quot;dummy&quot;
        A dummy cache system (<a class="Identifier" href="./../../vital/System/Cache/Dummy.html#Vital.System.Cache.Dummy">Vital.System.Cache.Dummy</a>)

        &quot;memory&quot;
        A dictionary instance based cache system (<a class="Identifier" href="./../../vital/System/Cache/Memory.html#Vital.System.Cache.Memory">Vital.System.Cache.Memory</a>)

        &quot;file&quot;
        A filesystem based cache system (<a class="Identifier" href="./../../vital/System/Cache/File.html#Vital.System.Cache.File">Vital.System.Cache.File</a>)

        &quot;singlefile&quot;
        A single file based cache system (<a class="Identifier" href="./../../vital/System/Cache/SingleFile.html#Vital.System.Cache.SingleFile">Vital.System.Cache.SingleFile</a>)

        The second argument <span class="Special">{options}</span> will be passed to a new method of a
        specified variant. See a document of new function in each variant to
        find available options.

register(<span class="Special">{name}</span>, <span class="Special">{class}</span>)               <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache.register()" name="Vital.System.Cache.register()">Vital.System.Cache.register()</a>

        Register a new variant <span class="Special">{class}</span> as <span class="Special">{name}</span>.

unregister(<span class="Special">{name}</span>)                      <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache.unregister()" name="Vital.System.Cache.unregister()">Vital.System.Cache.unregister()</a>

        Remove a registration of <span class="Special">{name}</span> variant.

<span class="PreProc">-------------------------------------------------------------------------------</span>
<span class="Statement">METHODS</span>                                 <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-methods" name="Vital.System.Cache-methods">Vital.System.Cache-methods</a>

cache_key(<span class="Special">{obj}</span>)                <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.cache_key()" name="Vital.System.Cache-instance.cache_key()">Vital.System.Cache-instance.cache_key()</a>

        Return a <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a> which will be used as a cache key of <span class="Special">{obj}</span>.

has(<span class="Special">{name}</span>)                     <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.has()" name="Vital.System.Cache-instance.has()">Vital.System.Cache-instance.has()</a>

        Whether the cache instance has a <span class="Special">{name}</span> cache or not.

        <span class="Special">{name}</span> (required)
        A name of the cache. An actual cache key should have been created via
        cache_key() method of each variant thus <span class="Special">{name}</span> is not required to be
        <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a>.

get(<span class="Special">{name}</span>[, <span class="Special">{default}</span>])        <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.get()" name="Vital.System.Cache-instance.get()">Vital.System.Cache-instance.get()</a>

        Return a value from a <span class="Special">{name}</span> cache. If no <span class="Special">{name}</span> cache is found, it
        returns <span class="Special">{default}</span> or an empty <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a>.

        <span class="Special">{name}</span> (required)
        A name of the cache. An actual cache key should have been created via
        cache_key() method of each variant thus <span class="Special">{name}</span> is not required to be
        <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a>.

        <span class="Special">{default}</span> (optional)
        A default value. If no <span class="Special">{default}</span> is specified, an empty <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a>
        should be used.

set(<span class="Special">{name}</span>, <span class="Special">{value}</span>)            <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.set()" name="Vital.System.Cache-instance.set()">Vital.System.Cache-instance.set()</a>

        Save <span class="Special">{value}</span> to a <span class="Special">{name}</span> cache.

        <span class="Special">{name}</span> (required)
        A name of the cache. An actual cache key should have been created via
        cache_key() method of each variant thus <span class="Special">{name}</span> is not required to be
        <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a>.

        <span class="Special">{value}</span> (required)
        A value of the cache.

keys()                          <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.keys()" name="Vital.System.Cache-instance.keys()">Vital.System.Cache-instance.keys()</a>

        Return a list of cache keys

remove(<span class="Special">{name}</span>)                  <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.remove()" name="Vital.System.Cache-instance.remove()">Vital.System.Cache-instance.remove()</a>

        Remove a <span class="Special">{name}</span> cache. If no <span class="Special">{name}</span> cache is found, it should do
        nothing.

        <span class="Special">{name}</span> (required)
        A name of the cache. An actual cache key should have been created via
        cache_key() method of each variant thus <span class="Special">{name}</span> is not required to be
        <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a>.

clear()                         <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.clear()" name="Vital.System.Cache-instance.clear()">Vital.System.Cache-instance.clear()</a>

        Clear all caches

on_changed()                    <a class="String" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.on_changed()" name="Vital.System.Cache-instance.on_changed()">Vital.System.Cache-instance.on_changed()</a>

        A user defined hook method. This method is called when the content of
        the cache is changed, namely after the following methods:
        - <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.set()">Vital.System.Cache-instance.set()</a>
        - <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.remove()">Vital.System.Cache-instance.remove()</a>
        - <a class="Identifier" href="./../../vital/System/Cache.html#Vital.System.Cache-instance.clear()">Vital.System.Cache-instance.clear()</a>

<span class="PreProc">==============================================================================</span>
vim&#0058;tw=78:fo=tcq2mM:ts=8:ft=help:norl
</pre>
<hr>
<a href="#top">top</a> - <a href="./../../index.html">main help file</a> - <a href="./../../tags.html">tag index</a> <br>

</body>
</html>
<!-- vim: set foldmethod=manual : -->
