<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Vim documentation: vital/System/Process</title>
<meta name="Generator" content="Vim/8.2">
<meta name="plugin-version" content="vim8.1_v2">
<meta name="syntax" content="help">
<meta name="settings" content="no_progress,ignore_folding,use_css,no_foldcolumn,expand_tabs,ignore_conceal,prevent_copy=,use_input_for_pc=fallback">
<meta name="colorscheme" content="github">
<style>
<!--
.MissingTag { background-color: black; color: white; }
.EnglishTag { background-color: gray; color: white; }
pre { font-family: monospace; color: #24292e; background-color: #ffffff; }
body { font-family: monospace; color: #24292e; background-color: #ffffff; }
* { font-size: 1em; }
.PreProc { color: #d73a49; }
.Todo { color: #6f42c1; text-decoration: underline; }
.helpExample { font-weight: bold; }
.Special { color: #6f42c1; }
.Ignore { color: #babbbc; background-color: #ffffff; padding-bottom: 1px; }
.Statement { color: #d73a49; }
-->
</style>
</head>
<body>

<a name="top"></a><h1>Vim documentation: vital/System/Process</h1>
<a href="./../../index.html">main help file</a>
<hr>
<pre id='vimCodeElement'>
<a class="String" href="./../../vital/System/Process.html" name="vital/System/Process.txt">vital/System/Process.txt</a>      Cross platform process executor

Maintainer: lambdalisue         &lt;lambdalisue@hashnote.net&gt;

<span class="PreProc">=============================================================================</span>
<span class="Statement">CONTENTS</span>                                <a class="String" href="./../../vital/System/Process.html#Vital.System.Process-contents" name="Vital.System.Process-contents">Vital.System.Process-contents</a>

Introduction                    <a class="Identifier" href="./../../vital/System/Process.html#Vital.System.Process-introduction">Vital.System.Process-introduction</a>
Install                         <a href="https://www.google.com/search?q=vim+%22Vital.System.Process-install%22&lr=lang_en"><span class="MissingTag">Vital.System.Process-install</span></a>
Usage                           <a class="Identifier" href="./../../vital/System/Process.html#Vital.System.Process-usage">Vital.System.Process-usage</a>
Functions                       <a class="Identifier" href="./../../vital/System/Process.html#Vital.System.Process-functions">Vital.System.Process-functions</a>
Developers                      <a class="Identifier" href="./../../vital/System/Process.html#Vital.System.Process-developers">Vital.System.Process-developers</a>


<span class="PreProc">=============================================================================</span>
<span class="Statement">INTRODUCTION</span>                            <a class="String" href="./../../vital/System/Process.html#Vital.System.Process-introduction" name="Vital.System.Process-introduction">Vital.System.Process-introduction</a>

<a href="https://www.google.com/search?q=vim+%22Vital.System.Process%22&lr=lang_en"><span class="MissingTag">Vital.System.Process</span></a> provides a cross-platform functions to execute process.

The following process clients are available:

- <a class="Identifier" href="./../../vital/System/Process/Mock.html#Vital.System.Process.Mock">Vital.System.Process.Mock</a>           For mock testing
- <a class="Identifier" href="./../../vital/System/Process/System.html#Vital.System.Process.System">Vital.System.Process.System</a>         Use <a href="https://www.google.com/search?q=vim+%22system()%22&lr=lang_en"><span class="MissingTag">system()</span></a> internally (*)
- <a class="Identifier" href="./../../vital/System/Process/Vimproc.html#Vital.System.Process.Vimproc">Vital.System.Process.Vimproc</a>        Use vimproc internally (*)

Clients with (*) will be automatically vitalized when <a href="https://www.google.com/search?q=vim+%22Vital.System.Process%22&lr=lang_en"><span class="MissingTag">Vital.System.Process</span></a>
is vitalized. Other modules require explicit <a class="Identifier" href="./../.././vitalizer.html#:Vitalize">:Vitalize</a> before use.


<span class="PreProc">=============================================================================</span>
<span class="Statement">USAGE</span>                                           <a class="String" href="./../../vital/System/Process.html#Vital.System.Process-usage" name="Vital.System.Process-usage">Vital.System.Process-usage</a>

<span class="helpExample">        let s:Process = s:V.import('System.Process')</span>
<span class="helpExample">        let result = s:Process.execute([</span>
<span class="helpExample">            \ 'git', 'rev-parse', '--is-inside-work-tree',</span>
<span class="helpExample">            \])</span>
<span class="helpExample">        echo result.output</span>
<span class="helpExample">        &quot; =&gt; true</span>


<span class="PreProc">=============================================================================</span>
<span class="Statement">FUNCTIONS</span>                               <a class="String" href="./../../vital/System/Process.html#Vital.System.Process-functions" name="Vital.System.Process-functions">Vital.System.Process-functions</a>

                                <a class="String" href="./../../vital/System/Process.html#Vital.System.Process.execute()" name="Vital.System.Process.execute()">Vital.System.Process.execute()</a>
execute(<span class="Special">{args}</span>[, <span class="Special">{options}</span>])
        Executes a process specified by <span class="Special">{args}</span> (<a href="https://www.google.com/search?q=vim+%22List%22&lr=lang_en"><span class="MissingTag">List</span></a>).
        It tries process clients listed in &quot;clients&quot; attribute of <span class="Special">{options}</span>
        and return a result <a href="https://www.google.com/search?q=vim+%22Dictionary%22&lr=lang_en"><span class="MissingTag">Dictionary</span></a> when one of a client supports a
        specified <span class="Special">{options}</span>.
        Otherwise it raises an exception 'None of client support options:'.

        The following attributes are supported in <span class="Special">{options}</span>

                &quot;clients&quot;
                A <a href="https://www.google.com/search?q=vim+%22List%22&lr=lang_en"><span class="MissingTag">List</span></a> of client names registered by
                <a class="Identifier" href="./../../vital/System/Process.html#Vital.System.Process.register()">Vital.System.Process.register()</a> function or an instance of
                a process client (<a href="https://www.google.com/search?q=vim+%22Dictionary%22&lr=lang_en"><span class="MissingTag">Dictionary</span></a>).
                The order of appearance is equal to the order of trial.
                When vimproc is available, <a class="Identifier" href="./../../vital/System/Process/Vimproc.html#Vital.System.Process.Vimproc">Vital.System.Process.Vimproc</a> will
                be listed prior to the <a class="Identifier" href="./../../vital/System/Process/System.html#Vital.System.Process.System">Vital.System.Process.System</a> in default.
                Default:
                ['System.Process.Vimproc', 'System.Process.System']
                or
                ['System.Process.System']

                &quot;input&quot;
                A <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a> or <a href="https://www.google.com/search?q=vim+%22Number%22&lr=lang_en"><span class="MissingTag">Number</span></a>. If <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a> is specified, the value will be
                passed to the process through the stdin. If <a href="https://www.google.com/search?q=vim+%22Number%22&lr=lang_en"><span class="MissingTag">Number</span></a> is
                specified, no value will be passed to the process.
                Default: 0

                &quot;timeout&quot;
                A process timeout in seconds (<a href="https://www.google.com/search?q=vim+%22Number%22&lr=lang_en"><span class="MissingTag">Number</span></a>). A system process
                client does not support this option, mean that vimproc is
                required to be available.
                Default: 0

                &quot;background&quot;
                If 1, the process will be executed in background. A system
                process client does not support this option in Windows, mean
                that vimproc is required to be available to use in Windows.
                When the process is executed in background, the &quot;success&quot; in
                <span class="Special">{result}</span> be always 1.
                <span class="Todo">Note</span> that there is no way to get PID or status of the process
                if this option is used.
                Default: 0

                &quot;encode_input&quot;
                A <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a> or <a href="https://www.google.com/search?q=vim+%22Number%22&lr=lang_en"><span class="MissingTag">Number</span></a>. If 1 is specified, &quot;input&quot; value will be
                encoded by <a href="https://www.google.com/search?q=vim+%22iconv()%22&lr=lang_en"><span class="MissingTag">iconv()</span></a> from <a href="https://www.google.com/search?q=vim+%22&amp;encoding%22&lr=lang_en"><span class="MissingTag">&amp;encoding</span></a> to &quot;char&quot;. If <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a> is
                specified, it will be encoded from a value of 'encode_input'
                to &quot;char&quot;.
                Default: 1

                &quot;encode_output&quot;
                A <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a> or <a href="https://www.google.com/search?q=vim+%22Number%22&lr=lang_en"><span class="MissingTag">Number</span></a>. If 1 is specified, &quot;output&quot; value in
                <span class="Special">{result}</span> will be encoded by <a href="https://www.google.com/search?q=vim+%22iconv()%22&lr=lang_en"><span class="MissingTag">iconv()</span></a> from &quot;char&quot; to <a href="https://www.google.com/search?q=vim+%22&amp;encoding%22&lr=lang_en"><span class="MissingTag">&amp;encoding</span></a>.
                If <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a> is specified, it will be encoded from &quot;char&quot; to a
                value of 'encode_output'.
                Default: 1

                &quot;split_output&quot;
                If 1, a POSIX <a href="https://www.google.com/search?q=vim+%22List%22&lr=lang_en"><span class="MissingTag">List</span></a> of &quot;output&quot; value in <span class="Special">{result}</span> will be
                embed into <span class="Special">{result}</span> dictionary as &quot;content&quot;.
                It uses <a class="Identifier" href="./../../vital/Data/String.html#Vital.Data.String.split_posix_text()">Vital.Data.String.split_posix_text()</a> internally.
                Default: 1

                &quot;debug&quot;
                If 1, let a process client to echo a debug information about
                process execution. The default value is taken from <a href="https://www.google.com/search?q=vim+%22'verbose'%22&lr=lang_en"><span class="MissingTag">'verbose'</span></a>
                option so that users can show debug information with
                <a href="https://www.google.com/search?q=vim+%22:verbose%22&lr=lang_en"><span class="MissingTag">:verbose</span></a> command.
                Default: &amp;verbose

        The following attributes exist in <span class="Special">{result}</span> dictionary and the value
        should be equal among clients and environments:

                &quot;success&quot;
                0 or 1 to indicate whether the process exit without
                exceptions, namely if the &quot;status&quot; is 0 or not.

                &quot;status&quot;
                An exit status of the process. <span class="Todo">Note</span> that if
                &quot;options.background&quot; is 1, it is always 0.

                &quot;output&quot;
                An output <a href="https://www.google.com/search?q=vim+%22String%22&lr=lang_en"><span class="MissingTag">String</span></a> of the process. It is encoded if
                'encode_output' is specified in <span class="Special">{options}</span>.

                &quot;content&quot;
                An output of the process as a <a href="https://www.google.com/search?q=vim+%22List%22&lr=lang_en"><span class="MissingTag">List</span></a> when &quot;options.split_output&quot;
                is specified. Otherwise the attribute is missing.

                &quot;args&quot;
                An argument <a href="https://www.google.com/search?q=vim+%22List%22&lr=lang_en"><span class="MissingTag">List</span></a> used for executing a process.

                &quot;options&quot;
                An option <a href="https://www.google.com/search?q=vim+%22Dictionary%22&lr=lang_en"><span class="MissingTag">Dictionary</span></a> used for executing a process.

        See individual client documents for extra attributes (e.g. &quot;cmdline&quot;).

        <span class="Todo">Note</span> that when &quot;options.debug&quot; is grater than 0, it echoes which client
        is used and the actual cmdline, for debugging.

                                <a class="String" href="./../../vital/System/Process.html#Vital.System.Process.register()" name="Vital.System.Process.register()">Vital.System.Process.register()</a>
register(<span class="Special">{name}</span>)
        Register a <span class="Special">{name}</span> Vital module as a process client.
        It only registers when &quot;is_available()&quot; method of the module returns
        truth value.
        The order of the registration effect the default priority of the
        clients.
        For a process client developer.

<span class="PreProc">=============================================================================</span>
<span class="Statement">DEVELOPERS</span>                              <a class="String" href="./../../vital/System/Process.html#Vital.System.Process-developers" name="Vital.System.Process-developers">Vital.System.Process-developers</a>

A process client module requires to have the following three methods.

                                <a class="String" href="./../../vital/System/Process.html#Vital.System.Process.Client.is_available()" name="Vital.System.Process.Client.is_available()">Vital.System.Process.Client.is_available()</a>
is_available()
        Return 0 or 1 to indicate if the module is available in a Vim.
        Modules which return 0 in this function will never be registered.

                                <a class="String" href="./../../vital/System/Process.html#Vital.System.Process.Client.is_supported()" name="Vital.System.Process.Client.is_supported()">Vital.System.Process.Client.is_supported()</a>
is_supported(<span class="Special">{options}</span>)
        Return 0 or 1 to indicate if the module support a specified <span class="Special">{options}</span>.
        Modules which return 0 in this function will be skipped.

                                <a class="String" href="./../../vital/System/Process.html#Vital.System.Process.Client.execute()" name="Vital.System.Process.Client.execute()">Vital.System.Process.Client.execute()</a>
execute(<span class="Special">{args}</span>, <span class="Special">{options}</span>)
        Execute a process specified by <span class="Special">{args}</span>. This method need to return a
        <span class="Special">{result}</span> <a href="https://www.google.com/search?q=vim+%22Dictionary%22&lr=lang_en"><span class="MissingTag">Dictionary</span></a> which must contains &quot;status&quot; and &quot;output&quot;. Any
        other attributes are optional.
        <span class="Todo">Note</span> that &quot;input&quot; should be encoded prior to the method (if user
        want), so should not encode without particular reasons.
        <span class="Todo">Note</span> that &quot;output&quot; will be encoded posterior to the method (if user
        want), so should not encode without particular reasons.
        <span class="Todo">Note</span> that the method should echo actual command and module name when
        &quot;options.debug&quot; is grater than 0, for example:

<span class="helpExample">        if a:options.debug &gt; 0</span>
<span class="helpExample">          echomsg printf(</span>
<span class="helpExample">            \ 'vital: System.Process.XXXXX: %s',</span>
<span class="helpExample">            \ cmdline,</span>
<span class="helpExample">            \)</span>
<span class="helpExample">        endif</span>

When you create a new process client, register that with
<a class="Identifier" href="./../../vital/System/Process.html#Vital.System.Process.register()">Vital.System.Process.register()</a> function in &quot;s:_vital_loaded()&quot; function of
<a href="https://www.google.com/search?q=vim+%22Vital.System.Process%22&lr=lang_en"><span class="MissingTag">Vital.System.Process</span></a> module.

<span class="PreProc">=============================================================================</span>
vim&#0058;tw=78:fo=tcq2mM:ts=8:ft=help:norl
</pre>
<hr>
<a href="#top">top</a> - <a href="./../../index.html">main help file</a> - <a href="./../../tags.html">tag index</a> <br>

</body>
</html>
<!-- vim: set foldmethod=manual : -->
